(this.webpackJsonpcomment=this.webpackJsonpcomment||[]).push([[0],{104:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(11),l=n.n(c),i=(n(85),n(18)),o=(n(86),n(71)),m=n(13),u=n(32),s=n(73),d=n(3),v=n(70),E=n(72),g=new u.a({uri:"https://floating-mountain-36472.heroku.com/graphql"}),p=new s.a({uri:"wss://murmuring-fortress-24950.herokuapp.com/",options:{reconnect:!0}}),f=Object(E.a)((function(e,t){var n=t.headers,a=localStorage.getItem("token");return console.log("sending token"),{headers:Object(o.a)({},n,{authorization:a?"Bearer ".concat(a):""})}})),b=(Object(m.d)((function(e){var t=e.query,n=Object(d.l)(t);return"OperationDefinition"===n.kind&&"subscription"===n.operation}),p,f.concat(g)),new v.a({uri:"http://localhost:5000/graphql"})),h=n(25),O=n(36),j=n(26),w=n.n(j);function y(){var e=Object(O.a)(["\nquery GET_COMMENT($id:ID){\n  comment(id:$id){\n    _id\n    email\n    time\n    content\n    replies{\n      _id\n      email\n      time\n      content\n    }\n  }\n}\n"]);return y=function(){return e},e}function C(){var e=Object(O.a)(["\n{\n  \tcomments{\n      _id\n      email\n      time\n      content\n      replies{\n        _id\n        email\n        time\n        content\n      }\n    }\n}\n"]);return C=function(){return e},e}var $=w()(C()),k=w()(y()),S=n(20),_=n(138),A=n(137),x=n(141),L=n(135),M=n(139),N=n(136),T=n(140);function q(){var e=Object(O.a)(["\n    mutation CREATE_REPLY($email:String!,$content:String,$comment:ID){\n        addReply(email:$email,content:$content,comment:$comment)\n        {\n            _id\n        }\n    }\n"]);return q=function(){return e},e}function z(){var e=Object(O.a)(["\n    mutation CREATE_COMMENT($email:String!,$content:String){\n        addComment(email:$email,content:$content)\n        {\n            _id\n        }\n    }\n"]);return z=function(){return e},e}var I=w()(z()),R=w()(q()),Z=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,D=function(e){var t=r.a.useState(""),n=Object(S.a)(t,2),a=n[0],c=n[1],l=r.a.useState(""),i=Object(S.a)(l,2),o=i[0],m=i[1],u=r.a.useState(),s=Object(S.a)(u,2),d=s[0],v=s[1];var E=Object(h.a)(R,{variables:{email:a,content:o,comment:e.comment},refetchQueries:[{query:k,variables:{id:e.comment}}]}),g=Object(S.a)(E,2),p=g[0],f=g[1],b=f.error;f.data;return r.a.createElement("div",{style:{textAlign:"left",padding:16}},b?r.a.createElement("p",null," ",b.message):null,r.a.createElement("div",null,r.a.createElement(T.a,{id:"outlined-name",label:"Email",value:a,onChange:function(e){c(e.target.value),v(Z.test(e.target.value.toLowerCase())?"success":"error")},variant:"outlined"})),r.a.createElement("div",null,r.a.createElement(T.a,{placeholder:"Leave a reply here",multiline:!0,rows:2,rowsMax:4,style:{width:500},value:o,onChange:function(e){return m(e.target.value)}})),r.a.createElement("div",{style:{marginTop:10}},r.a.createElement(N.a,{variant:"contained",disabled:"success"!==d,onClick:function(){return a&&(p(),m(""),void c(""))}},"reply")))},B=n(69),G=n.n(B),J=Object(A.a)((function(e){return Object(x.a)({root:{flexGrow:1,width:"100%",maxWidth:500},paper:{padding:e.spacing(2),textAlign:"left",color:e.palette.text.secondary},margin:{margin:e.spacing(1)},email:{margin:e.spacing(1)},date:{margin:e.spacing(1)},comment:{width:"80%",margin:e.spacing(1),wordWrap:"break-word"}})})),Q=function e(t){var n=t.comment,c=J(),l=Object(a.useState)(!1),i=Object(S.a)(l,2),o=i[0],m=i[1],u=Object(h.b)(k,{variables:{id:t.comment._id}}),s=u.loading,d=u.data;return r.a.createElement("div",null,s?r.a.createElement("div",null,"Loading..."):r.a.createElement("div",null,r.a.createElement(_.a,{container:!0,className:c.root},r.a.createElement("span",{className:c.email},d&&d.comment&&d.comment.email),r.a.createElement("span",{className:c.date},d&&d.comment&&d.comment.time),r.a.createElement("div",{className:c.comment},d&&d.comment&&d.comment.content)),r.a.createElement(_.a,null,r.a.createElement(L.a,null,d&&d.comment&&d.comment.replies&&d.comment.replies.map((function(t){return r.a.createElement(M.a,{key:t._id},r.a.createElement(e,{comment:t}))})))),r.a.createElement(N.a,{size:"small",onClick:function(){return m(!o)}},r.a.createElement(G.a,null),"reply to ",n.email),o?r.a.createElement(D,{comment:n._id}):null))},W=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,P=function(e){var t=r.a.useState(""),n=Object(S.a)(t,2),a=n[0],c=n[1],l=r.a.useState(""),i=Object(S.a)(l,2),o=i[0],m=i[1],u=r.a.useState(),s=Object(S.a)(u,2),d=s[0],v=s[1];var E=Object(h.a)(I,{variables:{email:a,content:o},refetchQueries:[{query:$}]}),g=Object(S.a)(E,2),p=g[0],f=g[1],b=f.error;f.data;return r.a.createElement("div",{style:{textAlign:"left",padding:16}},b?r.a.createElement("p",null," ",b.message):null,r.a.createElement("div",null,r.a.createElement(T.a,{id:"outlined-name",label:"Email",value:a,onChange:function(e){c(e.target.value),v(W.test(e.target.value.toLowerCase())?"success":"error")},variant:"outlined"})),r.a.createElement("div",null,r.a.createElement(T.a,{placeholder:"Leave a comment here",multiline:!0,rows:2,rowsMax:4,style:{width:500},value:o,onChange:function(e){return m(e.target.value)}})),r.a.createElement("div",{style:{marginTop:10}},r.a.createElement(N.a,{variant:"contained",disabled:"success"!==d,onClick:function(){return a&&(p(),m(""),void c(""))}},"comment")))},Y=function(e){var t=Object(h.b)($),n=t.loading,a=t.data;return console.log("fetching...."),r.a.createElement("div",null,"Commnet List",n?r.a.createElement("p",null,"Loading..."):r.a.createElement("div",null,r.a.createElement(L.a,null,a&&a.comments.map((function(e){return r.a.createElement(M.a,{key:e._id},r.a.createElement(Q,{comment:e}))}))),r.a.createElement(P,null)))};var F=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(i.a,{client:b},r.a.createElement(Y,null)))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(F,null)),document.getElementById("root"))},80:function(e,t,n){e.exports=n(104)},85:function(e,t,n){},86:function(e,t,n){}},[[80,1,2]]]);
//# sourceMappingURL=main.84deb27f.chunk.js.map